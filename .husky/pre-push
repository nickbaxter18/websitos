#!/bin/sh

# Prevent pushing code that fails lint, format, tests, or type checks

# Run type-check
npm run type-check || exit 1

# Run linting
npm run lint || exit 1

# Run prettier formatting check (JS/TS/JSON/YAML)
npm run format:check || exit 1

# Run Black formatting check for Python (optional, non-blocking)
if command -v black >/dev/null 2>&1; then
  echo "üîç Running Black on Python files..."
  black --check . || exit 1
else
  echo "‚ö†Ô∏è Black not installed locally. Skipping Python format check (will be enforced in CI)."
fi

# Run tests
npm test || exit 1
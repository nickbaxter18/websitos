#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "🔍 Running type-check before push..."
npm run type-check
TYPE_CHECK_EXIT=$?

echo "🔍 Running lint before push..."
npm run lint
LINT_EXIT=$?

if [ $TYPE_CHECK_EXIT -ne 0 ] || [ $LINT_EXIT -ne 0 ]; then
  echo "❌ Push aborted: type errors or lint issues found."
  exit 1
fi

echo "✅ Type-check & lint passed — pushing allowed!"
exit 0

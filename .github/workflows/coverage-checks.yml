      - name: Run backend coverage (Pytest with branch coverage + threshold)
        if: ${{ matrix.task == 'backend' }}
        run: |
          mkdir -p coverage/backend
          pytest backend/tests --maxfail=1 --disable-warnings -q \
            --cov=./backend --cov-branch --cov-append \
            --cov-report=xml:coverage/backend/coverage.xml \
            --cov-report=lcov:coverage/backend/lcov.info \
            --cov-report=json:coverage/backend/coverage.json \
            --cov-report=term-missing \
            --cov-fail-under=0